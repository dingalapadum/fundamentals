GIT CHEATSHEET
--------------

# set git user.name and email:
git config --global user.name "Your Name Comes Here"
git config --global user.email you@yourdomain.example.com

# see git variable
git config user.name
git config --list # see all git variables

# Initalize git repository
git init
# You will get a folder .git/

# dicard local changes to a file
git checkout file

# add files to index:
git add file1 file2 file3
git add . # add all files that changed

# remove a file from the index:
git reset file
git reset # remove all files from index
# will not revert the changes!

# see what is in the index (staged) and what is unstaged
git status

# store content of the index:
git commit
git commit -m "some commit message"

# commit message
# first line is the commit message
# blank line then complete description of the commit

# see diffs:
git diff --cached # (same as --staged) index vs repo (what would be commited)
git diff # current state vs index
git diff <commit-hash> # <commit-hash> vs current state
git diff <commit-hash-1> <commit-hash-2> # <commit-hash-1> vs <commit-hash-2>

# inspect commit
git show <commit-hash>

# use HEAD~<nr> instead of commit hash
# HEAD~<nr> refers to the commit <nr> of commits back, i.e. HEAD~0 is last commit and HEAD~3 is the commit 4 commits back

# view history of the changes
git log
git log --pretty=oneline
git log --pretty=format:"%h - %an, %ar : %s"
git log --pretty=format:"%h %s" --graph
# %h hash
# %s subject

# see complete diffs at each step
git log -p

# see content of specific commit
git show <hash>

# see content of last commit
git show HEAD

# show commit before last commit
git show HEAD~1

# undo last commit
git reset HEAD~

# accept changes from master
git rebase master

# change commit message of last commit:
git commit --amend

# change commit message of old commit:
git rebase -i HEAD~4
# assumig you want to edit one of the last 4 commit-messages
# follow instructions which then appear:
# change "pick" to "reword". Save -> you will be prompted to change
# the message of that committ 


----------------- Tasks. TODO: reconcile with the above

Branches

Create, list, rename:
# Create a new branch 'local-branch' and switch to it
git co -b local-branch
  
# List all branches
git branch #local
git branch -a #all
  
# Rename the current branch (locally only)
git branch -m <oldname> <newname>
 
# Delete branch
git branch -d <branchToDelete>
git branch -D <branchToDelete> # 'force' delete
Modifying old commits

Change stuff in an older commit. e.g. wrongly commited target:
git checkout <hash>  #this will detach your head (i.e. you are not on your branch anymore)
  
# do some changes: removing target
git rm -r target
# add some file
git add bla.txt
  
git commit --amend -m "<definitiv commit message>"
# git commit --amend if you want to use the same commit message as before
git rebase --onto HEAD <hash> <branch-name>
# the same hash as the one in the beginning
# branch-name is the one you left when the head got detachted
  
git push -f origin <branch-name>
Go back in the commit history
# uncommit last 2 commits but keep changes
git reset HEAD~2
 
 
# uncommit last 4 commits but keep changes staged
git reset --soft HEAD~4
 
 
# uncommit last commit and discard all the changes
git reset --hard HEAD~
Modifying commit messages

Last commit message
git commit --amend

Older commit messages
# to get a list of the last n commits
git rebase -i HEAD~n
 
 
# then change 'pick' to reword for each of the commit messages you want to change
# save-quit
# each of the commit-messages marked with 'reword' is opened one after the other
# rewrite the message and save-quit - the next commit-message will open.